<html>
	<head>
	<!--Starter page for project-->
    <title>Food Randomizer</title>
    <meta charset="utf-8">
        
    <!-- CSS Files -->
    <link rel="stylesheet" href="CSS/base.css" type="text/css">

	<script src="storage.js"></script>
        
    <script>
    var counter = 2;
	onload=function() {
		document.getElementById('submit').onclick=function(){
			//user enter
			var choices = document.getElementsByTagName('input')
			
			//numbers of choice user wants
			var n = 1;
            
//            alert(choices[0].value)
//			if(checkInput(choices) == 0){
//				alert('error')
//				return
//			} else {
//                return
//          }
			//display user's choices
//			var UserChoices = "Your choices <ul>"
//			for (i = 0; i < counter; i++) {
//				UserChoices += "<li>" + choices[i].value + "</li>"
//			}
//			UserChoices += "</ul>"
//			document.getElementById('d').innerHTML = UserChoices
			
			//display choices generated
			var answer = "Our suggest<ul>"
			var random = Math.floor(Math.random() * counter)
            answer += "<li>" + choices[random].value + "</li>"
			answer += "</ul>"
			document.getElementById('result').innerHTML = answer
			storeChoices()
		}
	}
    
    function checkInput(array) {
        for (var i = 0; i < counter; i++) {
            if(typeof(array[i].value) == "undefined" || array[i].value === null){
                alert(i)
				return 0
			}
        }
        return 1
    }
    
    function addBox() {
        var addBtn = document.getElementById('add')
        var input = '<input type="text" id="choices" name="food[]">'
        var inputBoxes = document.getElementsByClassName('newInput')
        if (counter == 8) {
            document.getElementById('tooMuchInput').innerHTML = "you only allowed 8 boxes"   
        } else {
            inputBoxes[counter].innerHTML = input
            counter++
        }
    }
	
	function storageEvent(event) {
		  event = event || window.event; // give IE8 some love
		  alert('Yo people! Something just got stored!');
		}

		if (window.attachEvent) { // ::sigh:: IE8 support
		   window.attachEvent('onstorage', storageEvent);
		} else {
			window.addEventListener('storage', storageEvent, false);
	}
	
	function storeChoices(){

		var choices = document.getElementsByTagName('input')
	
		var UserChoices;
		for (i = 0; i < counter; i++) {
			UserChoices += choices[i].value;
		}

		var foods = [
		'apple',
		'banana',
		'grapes',
		'apple',
		];
		
		alert('Store choices called');
		localStorage.foods = JSON.stringify(foods);	
		localStorage.foods2 = JSON.stringify(choices);	
//		alert('Stored data successfully?');
	}

	function displayQuestions(){
	
		var question = JSON.parse(localStorage.foods);	
		//var q_array
		//	alert(question);
	}
	</script>
        
	</head>

	<body>
        
    <!-- Keeping everything together -->
    <div class="wrapper">
        <div class="foodHeader">
            <h1>Food Randomizer</h1>
        </div>

        <div class="userInput">

            <h2>Welcome to Food Randomizer.</h2>
            <p>Please enter your choices here: </p>
			<p class="newInput"><input type="text" id="choices" name="food[]" placeholder="e.g. apple"></p><p class="newInput"><input type="text" id="choices" name="food[]"></p>
			<p class="newInput"></p>
			<p class="newInput"></p>
			<p class="newInput"></p>
			<p class="newInput"></p>
			<p class="newInput"></p>
			<p class="newInput"></p>
            <p id="tooMuchInput"></p>
			<p>
			<button id="add" type="button" onclick="addBox();">Add another item</button>
			</p>
<!--
            <p>how many choice(number): <input type="text" id="n"></p>
			-->
            <div id="submit" onclick="storeChoices"><button type="button">Choose!</button></div> 
		  <p id="result"></p>
        </div>
        
    </div> <!-- End of wrapper -->

    </body>
        <footer>
            <div class="footer_content">
                <p>By NS group: Alisa, Eric, Maggie, Haruna, Ryan, and Thomas. All rights reserved.</p>
            </div>
        </footer>

</html>
